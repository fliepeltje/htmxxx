const parser=new DOMParser;function patchElement(a){"A"!==a.tagName||a.patched?"FORM"===a.tagName&&!a.patched&&a.addEventListener("submit",b=>{b.preventDefault();const c=new FormData(a),d=a.action,e=a.method;let f=d;if("get"===e){const a=new URLSearchParams(c);f+="?"+a.toString(),fetch(f).then(a=>a.text()).then(a=>performUpdate(a)).catch(()=>{})}else fetch(d,{method:e,body:c}).then(a=>a.text()).then(a=>performUpdate(a)).catch(()=>{})}):a.addEventListener("click",b=>{b.preventDefault(),fetch(a.href).then(a=>a.text()).then(a=>performUpdate(a)).catch(()=>{})}),a.patched=!0}function performUpdate(a){const b=parser.parseFromString(a,"text/html"),c=b.querySelectorAll("[xxx-update]");c.forEach(a=>{target_id=a.getAttribute("xxx-update"),target=document.getElementById(target_id),target.outerHTML=a.innerHTML});const d=document.querySelectorAll("[xxx]");d.forEach(patchElement)}document.addEventListener("DOMContentLoaded",()=>{const a=document.querySelectorAll("[xxx]");a.forEach(patchElement)});