const parser=new DOMParser;function patchElement(e){"A"===e.tagName?e.addEventListener("click",(t=>{t.preventDefault(),fetch(e.href).then((e=>e.text())).then((e=>performUpdate(e))).catch((e=>{}))})):"FORM"===e.tagName&&e.addEventListener("submit",(t=>{t.preventDefault();const r=new FormData(e),a=e.action,n=e.method;let c=a;if("get"===n){c+="?"+new URLSearchParams(r).toString(),fetch(c).then((e=>e.text())).then((e=>performUpdate(e))).catch((e=>{}))}else fetch(a,{method:n,body:r}).then((e=>e.text())).then((e=>performUpdate(e))).catch((e=>{}))}))}function performUpdate(e){parser.parseFromString(e,"text/html").querySelectorAll("[xxx-update]").forEach((e=>{target_id=e.getAttribute("xxx-update"),target=document.getElementById(target_id),target.outerHTML=e.innerHTML}));document.querySelectorAll("[xxx]").forEach(patchElement)}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll("[xxx]").forEach(patchElement)}));