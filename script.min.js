const parser=new DOMParser;function patchElement(e){console.log("patching",e),"A"===e.tagName?e.addEventListener("click",(t=>{t.preventDefault(),fetch(e.href).then((e=>e.text())).then((e=>performUpdate(e))).catch((e=>{console.error("Error fetching link content:",e)}))})):"FORM"===e.tagName&&e.addEventListener("submit",(t=>{t.preventDefault();const r=new FormData(e),n=e.action,o=e.method;let c=n;if("get"===o){c+="?"+new URLSearchParams(r).toString(),fetch(c).then((e=>e.text())).then((e=>performUpdate(e))).catch((e=>{console.error("Error fetching form content:",e)}))}else fetch(n,{method:o,body:r}).then((e=>e.text())).then((e=>performUpdate(e))).catch((e=>{console.error("Error fetching form content:",e)}))}))}function performUpdate(e){parser.parseFromString(e,"text/html").querySelectorAll("[xxx-update]").forEach((e=>{target_id=e.getAttribute("xxx-update"),target=document.getElementById(target_id),target.outerHTML=e.innerHTML}));document.querySelectorAll("[xxx]").forEach(patchElement)}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll("[xxx]").forEach(patchElement)}));